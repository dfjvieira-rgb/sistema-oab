<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SISTEMA JOAQUIM - 18 PE√áAS COMPLETAS</title>
    <style>
        :root { --primary: #0f172a; --accent: #3b82f6; --bg: #f8fafc; --sidebar-bg: #1e293b; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); color: #334155; }
        #login-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--primary); display: flex; align-items: center; justify-content: center; z-index: 9999; }
        #main-app { display: none; }
        header { background: var(--primary); color: white; padding: 18px; text-align: center; font-weight: 800; border-bottom: 4px solid var(--accent); position: sticky; top: 0; z-index: 100; }
        .main-layout { display: flex; flex-direction: column; min-height: 100vh; }
        @media (min-width: 768px) { .main-layout { flex-direction: row; } .sidebar { width: 320px; height: 100vh; position: sticky; top: 0; } }
        .sidebar { background: var(--sidebar-bg); color: white; padding: 15px; overflow-y: auto; }
        .nav-btn { width: 100%; text-align: left; padding: 12px; margin-bottom: 5px; border: none; background: rgba(255,255,255,0.08); color: #f8fafc; cursor: pointer; border-radius: 6px; font-size: 0.8rem; }
        .nav-btn.active { background: var(--accent); font-weight: bold; border-left: 4px solid #fff; }
        .content-area { padding: 15px; flex-grow: 1; max-width: 900px; margin: 0 auto; width: 100%; box-sizing: border-box; }
        #joaquim { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); min-height: 70vh; border: 1px solid #e2e8f0; font-family: 'Times New Roman', serif; line-height: 1.6; }
        .gabarito-panel { background: #f1f5f9; border: 2px solid var(--accent); padding: 12px; border-radius: 10px; margin-bottom: 20px; font-family: 'Segoe UI', sans-serif; }
        .gab-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-top: 10px; }
        .gab-btn { background: var(--accent); color: white; border: none; padding: 10px; border-radius: 6px; font-weight: bold; font-size: 0.7rem; cursor: pointer; }
        .gab-content { display: none; margin-top: 15px; padding: 15px; background: white; border-radius: 8px; border: 1px solid #ddd; font-size: 1.05rem; white-space: pre-wrap; color: #1e293b; }
        .copy-btn { width: 100%; margin-bottom: 20px; background: #10b981; color: white; border: none; padding: 18px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1rem; }
        .peca-header { text-align: center; font-weight: bold; margin-bottom: 20px; text-transform: uppercase; border-bottom: 2px solid #eee; padding-bottom: 15px; font-family: 'Segoe UI', sans-serif; }
        .area-detecao { background: #f0f9ff; border: 2px solid #3b82f6; padding: 12px; border-radius: 8px; margin-bottom: 20px; }
        .card-fundamento { background: white; border: 1px solid #3b82f6; border-radius: 6px; padding: 8px; margin-bottom: 8px; box-shadow: 2px 2px 0px #bfdbfe; display: flex; align-items: center; }
        .tag-numero { background: #1e40af; color: white; padding: 2px 6px; border-radius: 4px; font-weight: bold; font-size: 0.75rem; margin-right: 10px; white-space: nowrap; }
        .texto-conceito { font-size: 0.8rem; color: #1e3a8a; font-family: 'Segoe UI', sans-serif; font-weight: 600; }
        .painel-estudo { background: #fffbeb; border: 2px solid #f59e0b; padding: 15px; border-radius: 10px; margin-bottom: 20px; font-family: 'Segoe UI', sans-serif; }
    </style>
</head>
<body>

<div id="login-screen">
    <button onclick="liberar()" style="padding:20px; cursor:pointer; font-weight:bold; border-radius:8px; border:none; background:var(--accent); color:white;">ACESSAR SISTEMA (JOAQUIM)</button>
</div>

<div id="main-app">
    <header>PR√ÅTICA 2¬™ FASE DIREITO DO TRABALHO</header>
    <div class="main-layout">
        <nav class="sidebar" id="menuLateral"></nav>
        <main class="content-area">
            <div id="joaquim"></div>
        </main>
    </div>
</div>

<script>
    const conceitosJuridicos = {
        "840": "Peti√ß√£o Inicial: Requisitos essenciais da RT escrita no rito ordin√°rio.",
        "461": "Equipara√ß√£o Salarial: Trabalho de igual valor, mesma produtividade e perfei√ß√£o t√©cnica.",
        "473": "Faltas Justificadas: Aus√™ncias que n√£o geram preju√≠zo ao sal√°rio (interrup√ß√£o).",
        "71": "Intervalo Intrajornada: O ¬ß 4¬∫ prev√™ indeniza√ß√£o de 50% sobre o per√≠odo suprimido.",
        "611-B": "Objeto Il√≠cito: Direitos indispon√≠veis que n√£o podem ser objeto de negocia√ß√£o coletiva.",
        "790": "Justi√ßa Gratuita: Benef√≠cio concedido mediante comprova√ß√£o de insufici√™ncia de recursos.",
        "539": "Consigna√ß√£o (CPC): Dep√≥sito judicial para extinguir a obriga√ß√£o do devedor.",
        "477": "Rescis√£o: Prazo de 10 dias para pagamento e multa do ¬ß 8¬∫ pelo atraso.",
        "542": "Procedimento da Consigna√ß√£o: Dep√≥sito do valor em ju√≠zo no prazo de 5 dias.",
        "546": "Senten√ßa de Consigna√ß√£o: Declara quitada a d√≠vida e extinta a obriga√ß√£o.",
        "769": "Aplica√ß√£o Subsidi√°ria: Permite o uso do CPC quando a CLT for omissa e compat√≠vel.",
        "853": "Inqu√©rito Falta Grave: Prazo decadencial de 30 dias ap√≥s a suspens√£o do est√°vel.",
        "847": "Contesta√ß√£o: Defesa do reclamado que deve ser apresentada at√© a audi√™ncia.",
        "337": "Preliminares: Defesas processuais (in√©pcia, litispend√™ncia, etc.) arguidas antes do m√©rito.",
        "895": "Recurso Ordin√°rio: Recurso para o TRT contra senten√ßas das Varas (8 dias).",
        "818": "√înus da Prova: Regras de distribui√ß√£o da prova entre as partes no processo.",
        "897-A": "Embargos de Declara√ß√£o (CLT): Sanar omiss√£o, contradi√ß√£o, obscuridade ou erro material.",
        "1022": "Embargos de Declara√ß√£o (CPC): Fundamento subsidi√°rio para omiss√µes na senten√ßa.",
        "900": "Contrarraz√µes: Prazo de 8 dias para a parte recorrida responder ao recurso."
    };

    const dbGabaritos = {
        'rt': { 1: `1.2. EXERC√çCIO I DE RECLAMA√á√ÉO TRABALHISTA (Enunciado - p√°g. 8)\nJos√© Fininho foi contratado pela empresa Heart Attack Grill Ltda., para trabalhar na cidade de Florian√≥polis/SC, como gar√ßom, mediante sal√°rio de R$ 1.500,00. Relata que foi contratado no mesmo dia em que Juan para exercer a mesma fun√ß√£o, na mesma filial. O trabalho se dava com a mesma perfei√ß√£o t√©cnica e produtividade, por√©m Juan recebia sal√°rio fixo de R$ 2.500,00 por m√™s. O senhor Fininho conta que, em janeiro do ano da extin√ß√£o do contrato, faltou ao trabalho por um dia para comparecer em ju√≠zo como parte no processo em que litigava contra seu ex-empregador. Embora tenha apresentado a certid√£o da Justi√ßa do Trabalho confirmando suas alega√ß√µes, o dia foi descontado do seu sal√°rio. O empregado comenta tamb√©m que trabalhava 8 horas di√°rias de segunda a sexta-feira e usufru√≠a de apenas 30 minutos de intervalo intrajornada. No curso do contrato, o empregador depositava apenas 4% do valor da remunera√ß√£o a t√≠tulo de FGTS, pois havia acordo coletivo de trabalho autorizando o recolhimento de apenas metade do valor.\n\nRESOLU√á√ÉO (p√°g. 9 a 11)\nAO DOUTO JU√çZO DA ... VARA DO TRABALHO DE FLORIAN√ìPOLIS/SC\nJOS√â FININHO, gar√ßom, qualifica√ß√£o e endere√ßo completos, vem, respeitosamente, perante Vossa Excel√™ncia, por interm√©dio de seu advogado adiante assinado (procura√ß√£o anexa), com escrit√≥rio profissional no endere√ßo completo, onde recebe intima√ß√µes ou notifica√ß√µes, com fulcro no art. 840, caput e ¬ß 1¬∫, da CLT, PROPOR:\nRECLAMA√á√ÉO TRABALHISTA, pelo rito ordin√°rio, em face de HEART ATTACK GRILL LTDA., qualifica√ß√£o e endere√ßo completos.\n\n1 - M√âRITO\n1.1. Equipara√ß√£o salarial\nO Reclamante e o paradigma Juan exerciam a mesma fun√ß√£o, para o mesmo empregador, na mesma localidade, com a mesma produtividade e perfei√ß√£o t√©cnica. No entanto, o paradigma recebia R$ 2.500,00 e o Reclamante R$ 1.500,00. Assim, requer a condena√ß√£o ao pagamento das diferen√ßas salariais e reflexos, nos termos do art. 461 da CLT.\n1.2. Devolu√ß√£o do desconto\nO Reclamante faltou um dia para comparecer em ju√≠zo. Nos termos do art. 473, VIII, da CLT, tal aus√™ncia √© considerada interrup√ß√£o contratual. Requer a devolu√ß√£o do desconto.\n1.3. Intervalo intrajornada\nO Reclamante usufru√≠a de apenas 30 minutos de intervalo. Nos termos do art. 71, caput e ¬ß 4¬∫ da CLT, requer o pagamento do per√≠odo suprimido com adicional de 50%.\n1.4. Diferen√ßas de FGTS\nO empregador depositava apenas 4% de FGTS com base em acordo coletivo. Tal cl√°usula √© nula, conforme art. 611-B, III, da CLT. Requer o pagamento das diferen√ßas.\n\n2 - PEDIDOS\na) Diferen√ßas salariais por equipara√ß√£o e reflexos; b) Devolu√ß√£o do desconto indevido; c) Pagamento do intervalo intrajornada suprimido; d) Diferen√ßas de FGTS; e) Honor√°rios de sucumb√™ncia.\n\n3 - REQUERIMENTOS FINAIS\na) Notifica√ß√£o da reclamada; b) Justi√ßa gratuita nos termos do art. 790, ¬ß 3¬∫, da CLT; c) Proced√™ncia total.\nD√°-se √† causa o valor de R$ .......\nNestes Termos, Pede Deferimento. Local e Data. Advogado... OAB...` },
        'consigna': { 1: `EXERC√çCIO DE A√á√ÉO DE CONSIGNA√á√ÉO EM PAGAMENTO (Gabarito 1)\nAO DOUTO JU√çZO DA ... VARA DO TRABALHO DE ...\nTRANSPORTES R√ÅPIDOS LTDA, qualifica√ß√£o e endere√ßo completos, vem, por seu advogado, com fulcro no art. 539 do CPC e art. 769 da CLT, propor:\nA√á√ÉO DE CONSIGNA√á√ÉO EM PAGAMENTO\nem face de MARCOS VINICIUS, qualifica√ß√£o e endere√ßo completos.\n\n1 - M√âRITO\nO consignado foi dispensado por justa causa. Ocorre que o mesmo n√£o compareceu para receber suas verbas rescis√≥rias. Visando evitar a mora e a incid√™ncia da multa do art. 477, ¬ß 8¬∫ da CLT, a consignante busca o dep√≥sito judicial do valor de R$ .......\n\n2 - PEDIDOS\na) O deferimento do dep√≥sito da quantia devida no prazo de 5 dias, conforme art. 542, I, do CPC;\nb) A notifica√ß√£o do consignado;\nc) A total proced√™ncia para declarar extinta a obriga√ß√£o e dar quita√ß√£o aos valores, nos termos do art. 546 do CPC;\nd) A condena√ß√£o em custas e honor√°rios.\n\nD√°-se √† causa o valor de R$ .......\nNestes Termos, Pede Deferimento. Local e Data. Advogado... OAB...` },
        'inquerito': { 1: `EXERC√çCIO DE INQU√âRITO PARA APURA√á√ÉO DE FALTA GRAVE (Gabarito 1)\nAO DOUTO JU√çZO DA ... VARA DO TRABALHO DE ...\nRECLAMADA (EMPRESA), qualifica√ß√£o completa, com fulcro no art. 853 da CLT, propor:\nINQU√âRITO PARA APURA√á√ÉO DE FALTA GRAVE em face de RECLAMADO (EMPREGADO).\n\n1 - M√âRITO\n1.1. Do Prazo Decadencial: O Reclamado foi suspenso em (data). O presente inqu√©rito est√° sendo ajuizado dentro do prazo de 30 dias, conforme determina o art. 853 da CLT.\n1.2. Da Justa Causa: O Reclamado praticou falta grave nos termos do art. 482 da CLT. Tratando-se de empregado est√°vel, a rescis√£o exige a proced√™ncia deste inqu√©rito conforme art. 494 da CLT.\n\n2 - PEDIDOS E REQUERIMENTOS\na) Notifica√ß√£o; b) Proced√™ncia total para autorizar a dispensa; c) Provas (art. 821 da CLT).\nD√°-se √† causa o valor de R$... Pede Deferimento. Advogado... OAB...` },
        'cont': { 1: `EXERC√çCIO DE CONTESTA√á√ÉO (Gabarito 1)\nAO DOUTO JU√çZO DA ... VARA DO TRABALHO DE ...\nProcesso n¬∫: ...\nRECLAMADA, j√° qualificada, por seu advogado, vem, com fulcro no art. 847 da CLT, apresentar:\nCONTESTA√á√ÉO\nem face de RECLAMANTE, j√° qualificado.\n\n1 - PRELIMINARES\nIn√©pcia da inicial: O pedido de horas extras n√£o apresenta causa de pedir, devendo ser extinto sem m√©rito conforme art. 337, IV, do CPC.\n\n2 - M√âRITO\n2.1. Das Horas Extras: A reclamada contesta o pedido, pois o reclamante exercia cargo de confian√ßa, sem controle de jornada.\n2.2. Do Adicional de Periculosidade: O reclamante jamais manteve contato com agentes inflam√°veis. Requer a improced√™ncia.\n\n3 - PEDIDOS\nDiante do exposto, requer o acolhimento da preliminar e, no m√©rito, a improced√™ncia total dos pedidos.\nNestes Termos, Pede Deferimento. Advogado... OAB...` },
        'ed': { 1: `EXERC√çCIO DE EMBARGOS DE DECLARA√á√ÉO (Gabarito 1)\nAO DOUTO JU√çZO DA ... VARA DO TRABALHO DE ...\nProcesso n¬∫: ...\nRECLAMANTE (ou RECLAMADA), j√° devidamente qualificado nos autos em ep√≠grafe, vem, respeitosamente, perante Vossa Excel√™ncia, por interm√©dio de seu advogado, com fulcro no art. 897-A da CLT e art. 1.022 do CPC, opor:\nEMBARGOS DE DECLARA√á√ÉO\nem face da r. decis√£o de fls., pelas raz√µes de fato e de direito a seguir expostas:\n1 - CABIMENTO E TEMPESTIVIDADE\nOs presentes embargos s√£o cab√≠veis, visto que a r. decis√£o padece de omiss√£o. Outrossim, o recurso √© tempestivo, pois interposto dentro do prazo de 5 dias √∫teis.\n2 - RAZ√ïES DOS EMBARGOS\n2.1. Da Omiss√£o\nVossa Excel√™ncia, ao proferir a senten√ßa, condenou a Reclamada ao pagamento de horas extras, todavia, quedou-se omisso em rela√ß√£o ao pedido de reflexos em Descanso Semanal Remunerado (DSR), conforme pleiteado na inicial.\nDessa forma, faz-se necess√°rio o acolhimento dos presentes embargos para que seja sanada a omiss√£o apontada.\n3 - PEDIDOS\nDiante do exposto, requer o conhecimento e o acolhimento dos presentes Embargos de Declara√ß√£o, para que seja sanada a omiss√£o apontada, conferindo, se necess√°rio, efeito modificativo ao julgado.\nNestes Termos, Pede Deferimento. Local e Data. Advogado... OAB...` },
        'ro': { 1: `EXERC√çCIO DE RECURSO ORDIN√ÅRIO (Gabarito 1)\n1¬™ PE√áA: INTERPOSI√á√ÉO\nAO DOUTO JU√çZO DA ... VARA DO TRABALHO DE ...\nProcesso n¬∫: ...\nRECORRENTE, qualifica√ß√£o, vem interpor RECURSO ORDIN√ÅRIO com fulcro no art. 895, I, da CLT. Requer notifica√ß√£o para contrarraz√µes (art. 900 da CLT) e prova do preparo (arts. 789 e 899 CLT).\n\n2¬™ PE√áA: RAZ√ïES\nEGR√âGIO TRIBUNAL REGIONAL DO TRABALHO DA ... REGI√ÉO\nI - M√âRITO: Reforma da senten√ßa quanto ao √¥nus da prova (art. 818 CLT). O ju√≠zo a quo decidiu em desacordo com as provas dos autos.\nII - CONCLUS√ÉO: Requer o conhecimento e provimento do recurso.\nLocal e Data. Advogado... OAB...` }
    };

    const nomesPecas = {
        rt: "01. Reclama√ß√£o Trabalhista", consigna: "02. Consigna√ß√£o em Pagamento", inquerito: "03. Inqu√©rito Falta Grave",
        cont: "04. Contesta√ß√£o", ed: "05. Embargos de Declara√ß√£o", replica: "06. R√©plica",
        ro: "07. Recurso Ordin√°rio", rade: "08. Recurso Adesivo", ai: "09. Agravo de Instrumento",
        rr: "10. Recurso de Revista", emb_tst: "11. Embargos ao TST", re_stf: "12. Recurso Extraordin√°rio",
        emb_exec: "13. Embargos √† Execu√ß√£o", epe: "14. Exce√ß√£o de Pr√©-Executividade", ap: "15. Agravo de Peti√ß√£o",
        emb_terc: "16. Embargos de Terceiro", ms: "17. Mandado de Seguran√ßa", ar: "18. A√ß√£o Rescis√≥ria"
    };

    function extrairConceitos(texto) {
        const regex = /(art\.?|artigo|s√∫mula|oj|lei)\s?(\d+)[^\n,.;]*/gi;
        let html = "";
        let matches;
        let encontrados = new Set();
        while ((matches = regex.exec(texto)) !== null) {
            let numero = matches[2];
            let itemCompleto = matches[0].toUpperCase();
            if (!encontrados.has(numero)) {
                let conceito = conceitosJuridicos[numero] || "Fundamento identificado no gabarito oficial.";
                html += `<div class="card-fundamento"><span class="tag-numero">${itemCompleto}</span><span class="texto-conceito">${conceito}</span></div>`;
                encontrados.add(numero);
            }
        }
        return html || "Aguardando extra√ß√£o de fundamentos...";
    }

    function liberar() {
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('main-app').style.display = 'block';
        montarMenu();
        loadPeca('rt');
    }

    function montarMenu() {
        document.getElementById('menuLateral').innerHTML = Object.keys(nomesPecas).map(k =>
            `<button class="nav-btn" id="btn_${k}" onclick="loadPeca('${k}')">${nomesPecas[k]}</button>`
        ).join('');
    }

    // AJUSTE: Fun√ß√£o loadPeca agora recupera o que foi salvo no localStorage
    function loadPeca(key) {
        let botoes = '', blocos = '';
        const lista = dbGabaritos[key] || {};
        for(let i=1; i<=10; i++){
            let id = `${key}_${i}`;
            let textoGabarito = lista[i] || `Gabarito ${i} aguardando inser√ß√£o palavra por palavra.`;
            let areaConceitos = extrairConceitos(textoGabarito);
            botoes += `<button class="gab-btn" onclick="toggleG('${id}')">üìñ Gabarito ${i}</button>`;
            blocos += `<div id="${id}" class="gab-content"><div class="area-detecao"><strong style="color:#1e3a8a; display:block; margin-bottom:10px;">‚öñÔ∏è FUNDAMENTA√á√ÉO (SEM DUPLICATAS):</strong>${areaConceitos}</div>${textoGabarito}</div>`;
        }

        // Tenta buscar o texto salvo anteriormente para esta pe√ßa espec√≠fica
        const textoSalvo = localStorage.getItem('rascunho_' + key) || "ID: 936045\n\n(Digite aqui sua pe√ßa...)";

        document.getElementById('joaquim').innerHTML = `
            <div class="painel-estudo"><strong>üß† TREINO DE MEM√ìRIA</strong><br><small>Escreva os fundamentos abaixo antes de conferir:</small><textarea style="width:100%; margin-top:10px; border:1px solid #f59e0b; padding:10px; border-radius:6px; height:60px; font-family:sans-serif;"></textarea></div>
            <button class="copy-btn" onclick="copyContent()">COPIAR TEXTO DO EDITOR</button>
            <div class="gabarito-panel"><div class="gab-grid">${botoes}</div>${blocos}</div>
            <div class="peca-header">${nomesPecas[key].split('. ')[1]}</div>
            <div id="texto-final" contenteditable="true" oninput="salvarAuto('${key}')">${textoSalvo}</div>
        `;
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('btn_'+key).classList.add('active');
        window.scrollTo(0,0);
    }

    // AJUSTE: Fun√ß√£o que salva o texto automaticamente a cada letra digitada
    function salvarAuto(key) {
        const conteudo = document.getElementById('texto-final').innerText;
        localStorage.setItem('rascunho_' + key, conteudo);
    }

    function toggleG(id) {
        const el = document.getElementById(id);
        const visible = el.style.display === 'block';
        document.querySelectorAll('.gab-content').forEach(d => d.style.display = 'none');
        el.style.display = visible ? 'none' : 'block';
    }

    function copyContent() {
        const texto = document.getElementById('texto-final').innerText;
        const areaCopia = document.createElement('textarea');
        areaCopia.value = texto;
        document.body.appendChild(areaCopia);
        areaCopia.select();
        document.execCommand('copy');
        document.body.removeChild(areaCopia);
        alert("Copiado!");
    }
</script>
</body>
</html>
