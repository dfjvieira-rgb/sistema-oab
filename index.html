<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SISTEMA JOAQUIM - MENTORIA MILITAR V6</title>
    <style>
        :root { 
            --primary: #002344; --accent: #1e5c2d; --bg: #f4f7f6; 
            --yellow: #f1c40f; --text: #2c3e50; --header-h: 60px; 
            --sidebar-w: 300px;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        header { background: var(--primary); color: white; height: var(--header-h); padding: 0 15px; display: flex; justify-content: space-between; align-items: center; z-index: 1000; border-bottom: 3px solid var(--yellow); }
        
        .nav-group { display: flex; gap: 5px; }
        .btn-top { background: #34495e; color: white; border: none; padding: 8px 10px; border-radius: 4px; cursor: pointer; font-size: 0.65rem; font-weight: bold; text-transform: uppercase; }

        main { display: flex; flex: 1; overflow: hidden; }
        
        /* Sidebar Estilo Pastas OAB */
        .sidebar { width: var(--sidebar-w); background: #e9ecef; border-right: 2px solid #dee2e6; display: flex; flex-direction: column; }
        .folder-tabs { display: flex; background: #ddd; }
        .tab-f { flex: 1; padding: 10px; font-size: 0.7rem; border: none; cursor: pointer; font-weight: bold; background: #ccc; }
        .tab-f.active { background: #e9ecef; border-top: 2px solid var(--primary); }
        
        .folder-content { flex: 1; overflow-y: auto; padding: 10px; }
        .item-file { background: white; padding: 10px; border-radius: 4px; border: 1px solid #ddd; margin-bottom: 5px; cursor: pointer; font-size: 0.75rem; transition: 0.2s; }
        .item-file:hover { border-color: var(--primary); background: #f0f4f8; }

        /* √Årea de Treino/Pe√ßas */
        .work-section { flex: 1; display: flex; flex-direction: column; background: white; border-right: 1px solid #ccc; }
        .editor-header { background: #eee; padding: 10px; display: flex; justify-content: space-between; align-items: center; font-size: 0.7rem; font-weight: bold; }
        #area-peca { flex: 1; padding: 25px; border: none; font-family: 'Courier New', monospace; font-size: 16px; line-height: 1.6; outline: none; resize: none; background-image: linear-gradient(#f1f1f1 1px, transparent 1px); background-size: 100% 1.6em; }

        /* Painel PDF */
        .pdf-section { width: 40%; background: #525659; display: flex; flex-direction: column; }
        #pdf-frame { width: 100%; height: 100%; border: none; background: white; }

        /* M√≥dulos de Intelig√™ncia */
        .mod-box { position: absolute; bottom: 20px; right: 20px; display: flex; gap: 10px; }
        .btn-mod { width: 50px; height: 50px; border-radius: 50%; border: none; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }

        @media (max-width: 1024px) { .pdf-section { display: none; } }
    </style>
</head>
<body>

<header>
    <div style="display:flex; align-items:center; gap:10px;">
        <button id="pergaminho" class="btn-top" onclick="abrirEstruturas()" style="background:var(--yellow); color:#000;">üìú ESTRUTURAS</button>
        <strong>JOAQUIM MENTORIA</strong>
    </div>
    <div class="nav-group">
        <button class="btn-top" onclick="abrirMod('teses')">‚öñÔ∏è TESES</button>
        <button class="btn-top" onclick="abrirMod('peca')">üîç QUAL A PE√áA?</button>
        <button class="btn-top" onclick="abrirMod('questoes')">‚ùì 50 QUEST√ïES</button>
    </div>
</header>

<main>
    <aside class="sidebar">
        <div class="folder-tabs">
            <button class="tab-f active" onclick="switchFolder('provas')">PROVAS</button>
            <button class="tab-f" onclick="switchFolder('leis')">LEIS</button>
            <button class="tab-f" onclick="switchFolder('editais')">EDITAIS</button>
        </div>
        <div class="folder-content" id="folder-files">
            </div>
    </aside>

    <section class="work-section">
        <div class="editor-header">
            <span id="label-doc">FOLHA DE RESPOSTAS FGV/AOCP</span>
            <div>
                <button onclick="salvarPDF()" title="Salvar PDF">üíæ</button>
                <button onclick="fazerBackup()">üì§</button>
            </div>
        </div>
        <textarea id="area-peca" placeholder="Desenvolva sua tese ou relat√≥rio policial aqui..."></textarea>
    </section>

    <section class="pdf-section">
        <iframe id="pdf-frame" src="about:blank"></iframe>
    </section>
</main>

<script>
    // BASE DE DADOS INTEGRADA (ESTILO OAB)
    const DATABASE = {
        provas: [
            { n: "PMDF 2023 - Caderno A", u: "https://www.institutoaocp.org.br/concursos/arquivos/pmdf_soldado_prova_tipo_a.pdf" },
            { n: "PMGO 2022 - Soldado", u: "https://www.institutoaocp.org.br/concursos/arquivos/PMGO_SOLDADO_CADERNO_PROVA.pdf" }
        ],
        leis: [
            { n: "C√≥digo Penal", u: "https://www.planalto.gov.br/ccivil_03/decreto-lei/del2848compilado.htm" },
            { n: "Processo Penal", u: "https://www.planalto.gov.br/ccivil_03/decreto-lei/del3689.htm" },
            { n: "Legisla√ß√£o Extravagante", u: "https://www.planalto.gov.br/ccivil_03/leis/l8072.htm" }
        ],
        editais: [
            { n: "Edital Verticalizado PMDF", u: "#" },
            { n: "Conte√∫do Program√°tico PMGO", u: "#" }
        ]
    };

    const ESTRUTURAS = {
        relatorio: "QUALIFICA√á√ÉO DO POLICIAL...\n\nI - HIST√ìRICO DA OCORR√äNCIA\nII - FUNDAMENTA√á√ÉO LEGAL (Art. do CP/CPP)\nIII - PROVID√äNCIAS ADOTADAS\nIV - FECHAMENTO",
        tese_penal: "1. PRELIMINARES (Nulidades, Extin√ß√£o de Punibilidade)\n2. M√âRITO (Atipicidade, Excludentes)\n3. SUBSIDI√ÅRIAS (Pena base, Regime, Substitui√ß√£o)"
    };

    // NAVEGA√á√ÉO DE PASTAS
    function switchFolder(folder) {
        const content = document.getElementById('folder-files');
        content.innerHTML = '';
        
        document.querySelectorAll('.tab-f').forEach(t => t.classList.remove('active'));
        event.target.classList.add('active');

        DATABASE[folder].forEach(file => {
            const div = document.createElement('div');
            div.className = 'item-file';
            div.innerHTML = `üìÑ ${file.n}`;
            div.onclick = () => {
                if(folder === 'leis') window.open(file.u, '_blank');
                else document.getElementById('pdf-frame').src = file.u;
                document.getElementById('label-doc').innerText = file.n;
            };
            content.appendChild(div);
        });
    }

    // INTELIG√äNCIAS (N√ÉO CONFUNDA)
    function abrirMod(tipo) {
        const area = document.getElementById('area-peca');
        if(tipo === 'peca') {
            const busca = prompt("Qual o crime/situa√ß√£o? (Ex: Roubo, Homic√≠dio)");
            area.value = `[INTELIG√äNCIA QUAL A PE√áA]\nPara a situa√ß√£o de ${busca}, a pe√ßa cab√≠vel costuma ser...\n\n(Baseado nos exames anteriores)`;
        }
        if(tipo === 'teses') {
            area.value = ESTRUTURAS.tese_penal;
        }
    }

    function abrirEstruturas() {
        const escolha = confirm("Deseja carregar a estrutura de RELAT√ìRIO OPERACIONAL?");
        if(escolha) document.getElementById('area-peca').value = ESTRUTURAS.relatorio;
    }

    // PERSIST√äNCIA LOCAL
    window.onload = () => {
        switchFolder('provas');
        const saved = localStorage.getItem('rascunho_pm');
        if(saved) document.getElementById('area-peca').value = saved;
        
        setInterval(() => {
            localStorage.setItem('rascunho_pm', document.getElementById('area-peca').value);
        }, 10000);
    };

    function fazerBackup() {
        const text = document.getElementById('area-peca').value;
        const blob = new Blob([text], { type: 'text/plain' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'MEU_ESTUDO_PM_JOAQUIM.txt';
        a.click();
    }

    function salvarPDF() {
        alert("O Disquete salvou este PDF no seu hist√≥rico de Mentoria.");
    }
</script>
</body>
</html>
